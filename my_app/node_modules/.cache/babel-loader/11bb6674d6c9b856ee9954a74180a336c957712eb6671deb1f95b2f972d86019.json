{"ast":null,"code":"var _jsxFileName = \"D:\\\\Intern\\\\my_app\\\\src\\\\pageManagement\\\\components\\\\PageRenderer.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport DynamicForm from './DynamicForm';\nimport DynamicTable from './DynamicTable';\nimport { hasPermission } from '../../components/permission';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PageRenderer = ({\n  config\n}) => {\n  _s();\n  const [items, setItems] = useState([]);\n  const [editingItem, setEditingItem] = useState(null);\n  const fetchData = async () => {\n    try {\n      const res = await fetch(config.apiUrl);\n      const data = await res.json();\n      console.log('Fetched data:', data);\n      setItems(data);\n    } catch (err) {\n      console.error('Failed to fetch:', err);\n    }\n  };\n  useEffect(() => {\n    fetchData();\n  }, []);\n  const handleAdd = async newItem => {\n    const res = await fetch(config.apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newItem)\n    });\n    if (res.ok) fetchData();\n  };\n  const handleEdit = async updatedItem => {\n    const res = await fetch(`${config.apiUrl}/${updatedItem.id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(updatedItem)\n    });\n    if (res.ok) {\n      setEditingItem(null);\n      fetchData();\n    }\n  };\n  const handleDelete = async id => {\n    const res = await fetch(`${config.apiUrl}/${id}`, {\n      method: 'DELETE'\n    });\n    if (res.ok) fetchData();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [hasPermission(config.permissions.view) && /*#__PURE__*/_jsxDEV(DynamicTable, {\n      items: items,\n      fields: config.fields,\n      onDelete: hasPermission(config.permissions.delete) ? handleDelete : null,\n      onEdit: hasPermission(config.permissions.edit) ? setEditingItem : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this), (hasPermission(config.permissions.add) || editingItem) && /*#__PURE__*/_jsxDEV(DynamicForm, {\n      fields: config.fields,\n      onSubmit: editingItem ? handleEdit : handleAdd,\n      initialData: editingItem\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n_s(PageRenderer, \"F6hhyuLOs/KCxPOM93opBOGeLHI=\");\n_c = PageRenderer;\nexport default PageRenderer;\nvar _c;\n$RefreshReg$(_c, \"PageRenderer\");","map":{"version":3,"names":["React","useEffect","useState","DynamicForm","DynamicTable","hasPermission","jsxDEV","_jsxDEV","PageRenderer","config","_s","items","setItems","editingItem","setEditingItem","fetchData","res","fetch","apiUrl","data","json","console","log","err","error","handleAdd","newItem","method","headers","body","JSON","stringify","ok","handleEdit","updatedItem","id","handleDelete","children","permissions","view","fields","onDelete","delete","onEdit","edit","fileName","_jsxFileName","lineNumber","columnNumber","add","onSubmit","initialData","_c","$RefreshReg$"],"sources":["D:/Intern/my_app/src/pageManagement/components/PageRenderer.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport DynamicForm from './DynamicForm';\r\nimport DynamicTable from './DynamicTable';\r\nimport { hasPermission } from '../../components/permission';\r\n\r\nconst PageRenderer = ({ config }) => {\r\n  const [items, setItems] = useState([]);\r\n  const [editingItem, setEditingItem] = useState(null);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const res = await fetch(config.apiUrl);\r\n      const data = await res.json();\r\n      console.log('Fetched data:', data);\r\n      setItems(data);\r\n    } catch (err) {\r\n      console.error('Failed to fetch:', err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleAdd = async (newItem) => {\r\n    const res = await fetch(config.apiUrl, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(newItem),\r\n    });\r\n    if (res.ok) fetchData();\r\n  };\r\n\r\n  const handleEdit = async (updatedItem) => {\r\n    const res = await fetch(`${config.apiUrl}/${updatedItem.id}`, {\r\n      method: 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(updatedItem),\r\n    });\r\n    if (res.ok) {\r\n      setEditingItem(null);\r\n      fetchData();\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    const res = await fetch(`${config.apiUrl}/${id}`, { method: 'DELETE' });\r\n    if (res.ok) fetchData();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {hasPermission(config.permissions.view) && (\r\n        <DynamicTable\r\n          items={items}\r\n          fields={config.fields}\r\n          onDelete={hasPermission(config.permissions.delete) ? handleDelete : null}\r\n          onEdit={hasPermission(config.permissions.edit) ? setEditingItem : null}\r\n        />\r\n      )}\r\n      {(hasPermission(config.permissions.add) || editingItem) && (\r\n        <DynamicForm\r\n          fields={config.fields}\r\n          onSubmit={editingItem ? handleEdit : handleAdd}\r\n          initialData={editingItem}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageRenderer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}