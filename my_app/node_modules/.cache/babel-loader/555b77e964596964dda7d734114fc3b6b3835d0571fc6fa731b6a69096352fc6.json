{"ast":null,"code":"var _jsxFileName = \"D:\\\\Intern\\\\my_app\\\\src\\\\pageManagement\\\\PageRenderer.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from 'react';\nimport { AuthContext } from '../AuthContext';\nimport DynamicTable from './DynamicTable';\nimport DynamicForm from './DynamicForm';\nimport Button from './DynamicButton';\nimport { hasPermission, fetchWithAuth } from './utils/hasPermission';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PageRenderer({\n  config\n}) {\n  _s();\n  const {\n    token\n  } = useContext(AuthContext);\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const loadData = async () => {\n    setLoading(true);\n    try {\n      const data = await fetchWithAuth(config.api.fetch, token);\n      setItems(Array.isArray(data) ? data : []);\n    } catch (err) {\n      console.error(\"Failed to fetch data\", err);\n    }\n    setLoading(false);\n  };\n  useEffect(() => {\n    loadData();\n  }, []);\n  const handleCreate = async formData => {\n    await fetchWithAuth(config.api.create, token, 'POST', formData);\n    loadData();\n  };\n  const handleUpdate = async (id, formData) => {\n    await fetchWithAuth(config.api.update(id), token, 'PUT', formData);\n    loadData();\n  };\n  const handleDelete = async id => {\n    await fetchWithAuth(config.api.delete(id), token, 'DELETE');\n    loadData();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(DynamicTable, {\n      items: items,\n      fields: config.fields,\n      onUpdate: handleUpdate,\n      onDelete: handleDelete,\n      permissionKeys: config.permissions\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DynamicForm, {\n      fields: config.fields,\n      onSubmit: handleCreate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(PageRenderer, \"T+7i4x5lYaZgtGmq3yW2inbHzms=\");\n_c = PageRenderer;\nvar _c;\n$RefreshReg$(_c, \"PageRenderer\");","map":{"version":3,"names":["React","useEffect","useState","useContext","AuthContext","DynamicTable","DynamicForm","Button","hasPermission","fetchWithAuth","jsxDEV","_jsxDEV","PageRenderer","config","_s","token","items","setItems","loading","setLoading","loadData","data","api","fetch","Array","isArray","err","console","error","handleCreate","formData","create","handleUpdate","id","update","handleDelete","delete","children","fields","onUpdate","onDelete","permissionKeys","permissions","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","_c","$RefreshReg$"],"sources":["D:/Intern/my_app/src/pageManagement/PageRenderer.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport { AuthContext } from '../AuthContext';\r\nimport DynamicTable from './DynamicTable';\r\nimport DynamicForm from './DynamicForm';\r\nimport Button from './DynamicButton';\r\nimport { hasPermission, fetchWithAuth } from './utils/hasPermission';\r\n\r\nexport default function PageRenderer({ config }) {\r\n  const { token } = useContext(AuthContext);\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const loadData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const data = await fetchWithAuth(config.api.fetch, token);\r\n      setItems(Array.isArray(data) ? data : []);\r\n    } catch (err) {\r\n      console.error(\"Failed to fetch data\", err);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const handleCreate = async (formData) => {\r\n    await fetchWithAuth(config.api.create, token, 'POST', formData);\r\n    loadData();\r\n  };\r\n\r\n  const handleUpdate = async (id, formData) => {\r\n    await fetchWithAuth(config.api.update(id), token, 'PUT', formData);\r\n    loadData();\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    await fetchWithAuth(config.api.delete(id), token, 'DELETE');\r\n    loadData();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n        <DynamicTable\r\n          items={items}\r\n          fields={config.fields}\r\n          onUpdate={handleUpdate}\r\n          onDelete={handleDelete}\r\n          permissionKeys={config.permissions}\r\n        />\r\n      <hr />\r\n        <DynamicForm\r\n          fields={config.fields}\r\n          onSubmit={handleCreate}\r\n        />\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}